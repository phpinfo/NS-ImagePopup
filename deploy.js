MooTools.More={version:"1.2.4.4",build:"6f6057dc645fdb7547689183b2311063bd653ddf"};
Element.implement({measure:function(b){var a=function(e){return!!(!e||e.offsetHeight||e.offsetWidth)};if(a(this))return b.apply(this);for(var g=this.getParent(),c=[];!a(g)&&g!=document.body;){c.push(g.expose());g=g.getParent()}a=this.expose();b=b.apply(this);a();c.each(function(e){e()});return b},expose:function(){if(this.getStyle("display")!="none")return $empty;var b=this.style.cssText;this.setStyles({display:"block",position:"absolute",visibility:"hidden"});return function(){this.style.cssText=
b}.bind(this)},getDimensions:function(b){b=$merge({computeSize:false},b);var a={},g=function(d,f){return f.computeSize?d.getComputedSize(f):d.getSize()},c=this.getParent("body");if(c&&this.getStyle("display")=="none")a=this.measure(function(){return g(this,b)});else if(c)try{a=g(this,b)}catch(e){}else a={x:0,y:0};return $chk(a.x)?$extend(a,{width:a.x,height:a.y}):$extend(a,{x:a.width,y:a.height})},getComputedSize:function(b){b=$merge({styles:["padding","border"],plains:{height:["top","bottom"],width:["left",
"right"]},mode:"both"},b);var a={width:0,height:0};switch(b.mode){case "vertical":delete a.width;delete b.plains.width;break;case "horizontal":delete a.height;delete b.plains.height;break}var g=[];$each(b.plains,function(d){d.each(function(f){b.styles.each(function(i){g.push(i=="border"?i+"-"+f+"-width":i+"-"+f)})})});var c={};g.each(function(d){c[d]=this.getComputedStyle(d)},this);var e=[];$each(b.plains,function(d,f){var i=f.capitalize();a["total"+i]=a["computed"+i]=0;d.each(function(j){a["computed"+
j.capitalize()]=0;g.each(function(h){if(h.test(j)){c[h]=c[h].toInt()||0;a["total"+i]+=c[h];a["computed"+j.capitalize()]=a["computed"+j.capitalize()]+c[h]}if(h.test(j)&&f!=h&&(h.test("border")||h.test("padding"))&&!e.contains(h)){e.push(h);a["computed"+i]-=c[h]}})})});["Width","Height"].each(function(d){var f=d.toLowerCase();if($chk(a[f])){a[f]=a[f]+this["offset"+d]+a["computed"+d];a["total"+d]=a[f]+a["total"+d];delete a["computed"+d]}},this);return $extend(c,a)}});var NS=NS||{};
NS.ImagePopup=new Class({append:function(b){b.each(function(a){a.addEvent("click",this._popup.bindWithEvent(this,a.get("href")))}.bind(this))},_popup:function(b,a){b.stop();if(a.indexOf("blogspot.com")>=0)a=a.replace("-h/","/");var g=b.target.getPosition(),c=b.target.getDimensions(),e=new Image;e.onload=function(){this._getContainer().set("src",a).setStyles({left:g.x,top:g.y,width:c.width,height:c.height});this._show(e.width,e.height)}.bind(this);e.onerror=function(){alert('Error occured while loading "'+a+
'"')}.bind(this);e.src=a},_show:function(b,a){var g=this._getContainer(),c=window.getSize(),e=document.body.getScroll();if(b>c.x||a>c.y){var d=c.x-0.05*c.x,f=c.y-0.05*c.y;if(d<f)f=a*d/b;else d=b*f/a;b=d;a=f}g.fade("show");this._getFx().start({left:(c.x-b)/2+e.x,top:(c.y-a)/2+e.y,width:b,height:a})},_hide:function(){this._getContainer().fade("hide").setStyles({width:0,height:0})},_getContainer:function(){if(NS.ImagePopup._cont===null){NS.ImagePopup._cont=(new Element("img")).setStyles({position:"absolute",
"z-index":999,left:0,top:0,width:0,height:0,visibility:"hidden"}).addClass("ns-imagepopup").inject($$("body")[0]);document.body.addEvent("click",function(b){b.stopPropagation();this._hide()}.bind(this))}return NS.ImagePopup._cont},_getFx:function(){if(NS.ImagePopup._fx===null)NS.ImagePopup._fx=new Fx.Morph(NS.ImagePopup._cont,{duration:200});return NS.ImagePopup._fx}});NS.ImagePopup._cont=null;NS.ImagePopup._fx=null;